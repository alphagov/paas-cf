---
on: pull_request

jobs:
  checkov:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repo
        uses: actions/checkout@ec3a7ce113134d7a93b817d10a8272cb61118579
        with:
          submodules: true

      - name: Set up Python 3.8
        uses: actions/setup-python@152ba7c4dd6521b8e9c93f72d362ce03bf6c4f20
        with:
          python-version: 3.8

      - name: Install Checkov
        run: pip3 install checkov

      - name: Run checkov
        run: checkov -d terraform/az-management
